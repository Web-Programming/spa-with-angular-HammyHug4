<!-- Register Section -->
<section class="register-section py-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-6 mx-auto">

        <!-- Section Header -->
        <div class="text-center mb-5">
          <h1 class="display-4 fw-bold text-primary mb-3">Daftar Akun</h1>
          <p class="lead text-muted">
            Bergabunglah dengan Griya MDP dan temukan properti impian Anda!
          </p>
        </div>

        <!-- Register Card -->
        <div class="card shadow-lg border-0">
          <div class="card-body p-4 p-md-5">

            <!-- ALERT SUCCESS -->
            <div class="alert alert-success alert-dismissible fade show" *ngIf="successMessage">
              <i class="bi bi-check-circle-fill me-2"></i>{{ successMessage }}
              <button type="button" class="btn-close" (click)="successMessage=''" aria-label="Close"></button>
            </div>

            <!-- ALERT ERROR -->
            <div class="alert alert-danger alert-dismissible fade show" *ngIf="errorMessage">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>{{ errorMessage }}
              <button type="button" class="btn-close" (click)="errorMessage=''" aria-label="Close"></button>
            </div>

            <!-- FORM -->
            <form [formGroup]="registerForm" (ngSubmit)="submitRegister()">

              <!-- NAME -->
              <div class="mb-4">
                <label class="form-label fw-semibold">
                  <i class="bi bi-person-fill me-2"></i>Nama Lengkap
                </label>
                <input type="text" class="form-control form-control-lg"
                  formControlName="name"
                  placeholder="Masukkan nama lengkap Anda"
                  [class.is-invalid]="registerForm.get('name')?.touched && registerForm.get('name')?.invalid">

                <div class="invalid-feedback" *ngIf="registerForm.get('name')?.errors?.['required']">
                  Nama harus diisi
                </div>
                <div class="invalid-feedback" *ngIf="registerForm.get('name')?.errors?.['minlength']">
                  Nama minimal 2 karakter
                </div>
              </div>

              <!-- EMAIL -->
              <div class="mb-4">
                <label class="form-label fw-semibold">
                  <i class="bi bi-envelope-fill me-2"></i>Email
                </label>
                <input type="email" class="form-control form-control-lg"
                  formControlName="email"
                  placeholder="nama@example.com"
                  [class.is-invalid]="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">

                <div class="invalid-feedback" *ngIf="registerForm.get('email')?.errors?.['required']">
                  Email harus diisi
                </div>
                <div class="invalid-feedback" *ngIf="registerForm.get('email')?.errors?.['email']">
                  Format email tidak valid
                </div>
              </div>

              <!-- PASSWORD -->
              <div class="mb-4">
                <label class="form-label fw-semibold">
                  <i class="bi bi-lock-fill me-2"></i>Password
                </label>
                <div class="input-group">
                  <input
                    [type]="showPassword ? 'text' : 'password'"
                    class="form-control form-control-lg"
                    formControlName="password"
                    placeholder="Minimal 6 karakter"
                    [class.is-invalid]="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">

                  <button type="button" class="btn btn-outline-secondary"
                    (click)="showPassword = !showPassword">
                    <i [ngClass]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
                  </button>
                </div>

                <div class="invalid-feedback d-block" *ngIf="registerForm.get('password')?.errors?.['required']">
                  Password harus diisi
                </div>
                <div class="invalid-feedback d-block" *ngIf="registerForm.get('password')?.errors?.['minlength']">
                  Password minimal 6 karakter
                </div>
              </div>

              <!-- CONFIRM PASSWORD -->
              <div class="mb-4">
                <label class="form-label fw-semibold">
                  <i class="bi bi-lock-fill me-2"></i>Konfirmasi Password
                </label>

                <div class="input-group">
                  <input
                    [type]="showConfirmPassword ? 'text' : 'password'"
                    class="form-control form-control-lg"
                    formControlName="confirmPassword"
                    placeholder="Ketik ulang password"
                    [class.is-invalid]="
                      (registerForm.get('confirmPassword')?.touched &&
                      registerForm.get('confirmPassword')?.invalid) ||
                      (registerForm.errors?.['mismatch'] && registerForm.get('confirmPassword')?.touched)
                    ">

                  <button type="button" class="btn btn-outline-secondary"
                    (click)="showConfirmPassword = !showConfirmPassword">
                    <i [ngClass]="showConfirmPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
                  </button>
                </div>

                <div class="invalid-feedback d-block"
                  *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">
                  Konfirmasi password harus diisi
                </div>

                <div class="invalid-feedback d-block"
                  *ngIf="registerForm.errors?.['mismatch']">
                  Password dan Konfirmasi Password tidak cocok
                </div>
              </div>

              <!-- SUBMIT BUTTON -->
              <div class="d-grid gap-2 mb-3">
                <button type="submit" class="btn btn-primary btn-lg py-3"
                  [disabled]="registerForm.invalid || isLoading">
                  <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
                  <i *ngIf="!isLoading" class="bi bi-person-plus-fill me-2"></i>
                  {{ isLoading ? 'Memproses...' : 'Daftar Sekarang' }}
                </button>
              </div>

              <!-- LINK KE LOGIN -->
              <div class="text-center">
                <p class="mb-0 text-muted">
                  Sudah punya akun?
                  <a routerLink="/login" class="text-primary fw-semibold text-decoration-none">
                    Login di sini
                  </a>
                </p>
              </div>

            </form>

          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- Benefits Info -->
<div class="row mt-5 g-4">
  <div class="col-md-4">
    <div class="card h-100 text-center border-0 shadow-sm">
      <div class="card-body">
        <div class="rounded-circle bg-primary bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" 
             style="width: 60px; height: 60px;">
          <i class="bi bi-shield-check text-white fs-3"></i>
        </div>
        <h6 class="card-title fw-bold">Aman & Terpercaya</h6>
        <p class="text-muted small">Data Anda dilindungi dengan enkripsi tingkat tinggi</p>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card h-100 text-center border-0 shadow-sm">
      <div class="card-body">
        <div class="rounded-circle bg-success bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" 
             style="width: 60px; height: 60px;">
          <i class="bi bi-bell-fill text-white fs-3"></i>
        </div>
        <h6 class="card-title fw-bold">Update Terbaru</h6>
        <p class="text-muted small">Dapatkan notifikasi properti baru sesuai kebutuhan</p>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card h-100 text-center border-0 shadow-sm">
      <div class="card-body">
        <div class="rounded-circle bg-info bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" 
             style="width: 60px; height: 60px;">
          <i class="bi bi-heart-fill text-white fs-3"></i>
        </div>
        <h6 class="card-title fw-bold">Simpan Favorit</h6>
        <p class="text-muted small">Bookmark properti favorit untuk akses mudah</p>
      </div>
    </div>
  </div>
</div>
